import{setupReceiverNode}from"../../helper/setupReceiverNode";window.inspectorToolPanels.receiver=function(e,t){t.innerHTML='\n        <div>\n            <p>Receive Message:</p>\n            <select id="receive-message-select" style="margin-bottom: 12px;" disabled>\n                <option>Waiting for VM to load...</option>\n            </select>\n        </div>\n    ',window.waitForVMAndUpdate(window.getScratchBroadcastNames,function(o){const n=t.querySelector("#receive-message-select");n&&(n.innerHTML=0===o.length?"<option>(no broadcasts found)</option>":o.map(t=>`<option value="${t}" ${e.data?.receiverMessage===t?"selected":""}>${t}</option>`).join(""),n.disabled=!1,n.addEventListener("change",function(t){e.data.receiverMessage=t.target.value;const o={metadata:{lastScratchProjectId:window.lastScratchProjectId||null},nodes:window.nodeData};localStorage.setItem("nodes",JSON.stringify(o)),setupReceiverNode(e)}))})};